{
	"_comment": "For more information about the format of this file, see README.md in the autochecklist package.",
	"name": "mcr_teardown",
	"subtasks": [
		{
			"name": "get_service_info",
			"description": "Failed to fetch the plan information from Planning Center.",
			"only_auto": true
		},
		{
			"name": "stop_broadcast",
			"description": "If you have not already done so, stop the broadcast on BoxCast and then in vMix.",
			"prerequisites": [
				"get_service_info"
			]
		},
		{
			"name": "main_tasks",
			"prerequisites": [
				"stop_broadcast"
			],
			"subtasks": [
				{
					"name": "update_and_stow_computers",
					"subtasks": [
						{
							"name": "update_video_computer",
							"description": "Check for updates on the MCR video computer."
						},
						{
							"name": "update_sound_computer",
							"description": "Check for updates on the MCR sound computer."
						},
						{
							"name": "update_kids_laptop",
							"description": "Bring back the Kids Connection laptop from the Annex and check for updates."
						}
					]
				},
				{
					"name": "wait_for_BoxCast_recording",
					"description": "Wait until the BoxCast recording is available."
				},
				{
					"name": "Vimeo",
					"subtasks": [
						{
							"name": "export_to_Vimeo",
							"description": "On BoxCast, export the recording to Vimeo. On the live event page, go to Download or Export Recording > Vimeo.",
							"prerequisites": [
								"wait_for_BoxCast_recording"
							]
						},
						{
							"name": "copy_Vimeo_URL_to_COP",
							"description": "Take the link to today's Vimeo video and copy it to Church Online Platform. [[url|https://github.com/recc-tech/tech/wiki/Copying-the-Vimeo-Link-to-Church-Online-Platform|More details]].",
							"prerequisites": [
								"export_to_Vimeo"
							]
						},
						{
							"name": "choose_Vimeo_video_thumbnail",
							"description": "In today's Vimeo video, set the thumbnail to be the pre-stream title loop.",
							"prerequisites": [
								"export_to_Vimeo"
							]
						}
					]
				},
				{
					"name": "captions",
					"subtasks": [
						{
							"name": "generate_captions",
							"description": "Wait for the captions on BoxCast to be available.",
							"prerequisites": [
								"wait_for_BoxCast_recording"
							]
						},
						{
							"name": "automatically_edit_captions",
							"description": "The automatic caption editing failed.",
							"prerequisites": [
								"generate_captions"
							],
							"only_auto": true
						},
						{
							"name": "disable_automatic_captions",
							"description": "On Vimeo, disable the autogenerated captions for today's video.",
							"prerequisites": [
								"automatically_edit_captions",
								"export_to_Vimeo"
							],
							"_comment": "Put this task as late as possible so Vimeo has a chance to post the autogenerated captions."
						},
						{
							"name": "upload_captions_to_Vimeo",
							"description": "Upload the captions to Vimeo and make sure they are enabled.",
							"prerequisites": [
								"automatically_edit_captions",
								"export_to_Vimeo",
								"disable_automatic_captions"
							],
							"_comment": "This task depends on disable_automatic_captions due to the way the automation is implemented. This dependency may no longer be necessary if https://github.com/recc-tech/tech/issues/274 is fixed."
						}
					]
				}
			]
		},
		{
			"name": "handle_outdated_assets",
			"prerequisites": [
				"stop_broadcast"
			],
			"subtasks": [
				{
					"name": "delete_outdated_PCO_assets",
					"description": "On Planning Center, delete outdated assets. [[url|https://github.com/recc-tech/tech/wiki/Deleting-Outdated-Assets-on-Planning-Center-Online|More details]]."
				},
				{
					"name": "archive_outdated_local_assets",
					"description": "If you have time, clear out outdated files. For each outdated file, close the input in vMix and move the file to %{folder.archived_assets}%."
				}
			]
		},
		{
			"name": "turn_everything_off",
			"prerequisites": [
				"stop_broadcast"
			],
			"subtasks": [
				{
					"name": "close_vMix",
					"prerequisites": [
						"archive_outdated_local_assets"
					],
					"description": "Save this week's preset and close vMix."
				},
				{
					"name": "turn_off_monitors",
					"description": "Turn off both TV monitors in the MCR."
				},
				{
					"name": "turn_off_NDI_controller",
					"description": "Turn off the NDI controller."
				},
				{
					"name": "turn_off_cams",
					"description": "Turn off camera 4 (the camera on the tripod)."
				},
				{
					"name": "turn_off_speakers",
					"description": "Turn off the speakers in the MCR."
				}
			]
		},
		{
			"name": "check_GitHub_checklist",
			"prerequisites": [
				"main_tasks",
				"handle_outdated_assets",
				"turn_everything_off"
			],
			"description": "Double-check that all tasks (especially automatic ones) have been completed properly using the checklist on GitHub: [[url|https://github.com/recc-tech/tech/issues]]."
		}
	]
}