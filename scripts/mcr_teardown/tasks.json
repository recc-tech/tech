{
	"_comment": "For more information about the format of this file, see [TODO: update docs].",
	"name": "mcr_teardown",
	"subtasks": [
		{
			"name": "stop_broadcast",
			"description": "If you have not already done so, stop the broadcast in vMix and on BoxCast."
		},
		{
			"name": "main_tasks",
			"prerequisites": [
				"stop_broadcast"
			],
			"subtasks": [
				{
					"name": "update_and_stow_computers",
					"subtasks": [
						{
							"name": "update_video_computer",
							"description": "Check for updates on the MCR video computer."
						},
						{
							"name": "update_sound_computer",
							"description": "Check for updates on the MCR sound computer."
						},
						{
							"name": "update_kids_laptop",
							"description": "Bring back the Kids Connection laptop and charger from the Annex and check for updates."
						},
						{
							"name": "update_teleprompter_laptop",
							"description": "Bring back the teleprompter laptop and check for updates."
						}
					]
				},
				{
					"name": "rebroadcasts",
					"subtasks": [
						{
							"name": "create_rebroadcast_1pm",
							"description": "On BoxCast, create a rebroadcast titled '%{REBROADCAST_TITLE}%' at 1:00 pm."
						},
						{
							"name": "create_rebroadcast_5pm",
							"description": "On BoxCast, create a rebroadcast titled '%{REBROADCAST_TITLE}%' at 5:00 pm.",
							"prerequisites": [
								"create_rebroadcast_1pm"
							]
						},
						{
							"name": "create_rebroadcast_7pm",
							"description": "On BoxCast, create a rebroadcast titled '%{REBROADCAST_TITLE}%' at 7:00 pm.",
							"prerequisites": [
								"create_rebroadcast_5pm"
							]
						}
					]
				},
				{
					"name": "vimeo",
					"subtasks": [
						{
							"name": "export_to_vimeo",
							"description": "On BoxCast, export the recording to Vimeo."
						},
						{
							"name": "get_vimeo_video_data",
							"description": "The Vimeo video data could not be retrieved automatically. See the logs for details (%{LOG_FILE}%).",
							"prerequisites": [
								"export_to_vimeo"
							]
						},
						{
							"name": "disable_automatic_captions",
							"description": "On Vimeo, disable the autogenerated captions for today's video.",
							"prerequisites": [
								"get_vimeo_video_data"
							]
						},
						{
							"name": "rename_video_on_vimeo",
							"description": "On Vimeo, rename the video to '%{VIMEO_VIDEO_TITLE}%'.",
							"prerequisites": [
								"get_vimeo_video_data"
							]
						}
					]
				},
				{
					"name": "index_recording",
					"description": "On BoxCast, index the recording. See https://github.com/recc-tech/tech/wiki/Video-Markers for the list of chapters."
				},
				{
					"name": "captions",
					"subtasks": [
						{
							"name": "start_generating_captions",
							"description": "On BoxCast, press the button to start generating captions."
						},
						{
							"name": "review_and_publish_captions",
							"description": "On BoxCast, review low-confidence cues and publish the captions.",
							"prerequisites": [
								"start_generating_captions"
							]
						},
						{
							"name": "download_captions",
							"description": "On BoxCast, download the captions and save them in %{ORIGINAL_CAPTIONS_PATH}%.",
							"prerequisites": [
								"review_and_publish_captions"
							]
						},
						{
							"name": "copy_captions_to_without_worship",
							"description": "Copy %{ORIGINAL_CAPTIONS_PATH}% to %{CAPTIONS_WITHOUT_WORSHIP_PATH}%.",
							"prerequisites": [
								"download_captions"
							]
						},
						{
							"name": "remove_worship_captions",
							"description": "In %{CAPTIONS_WITHOUT_WORSHIP_PATH}%, remove the worship captions.",
							"prerequisites": [
								"copy_captions_to_without_worship"
							]
						},
						{
							"name": "copy_captions_to_final",
							"description": "Copy %{CAPTIONS_WITHOUT_WORSHIP_PATH}% to %{FINAL_CAPTIONS_PATH}%.",
							"prerequisites": [
								"remove_worship_captions"
							]
						},
						{
							"name": "review_captions",
							"description": "In %{FINAL_CAPTIONS_PATH}%, double-check that the worship captions were removed properly (if it was done automatically).",
							"prerequisites": [
								"copy_captions_to_final",
								"index_recording"
							]
						},
						{
							"name": "upload_captions_to_boxcast",
							"description": "On BoxCast, upload the captions.",
							"prerequisites": [
								"review_captions"
							]
						},
						{
							"name": "upload_captions_to_vimeo",
							"description": "On Vimeo, upload the captions and make sure they are enabled.",
							"prerequisites": [
								"review_captions",
								"disable_automatic_captions"
							]
						}
					]
				}
			]
		},
		{
			"name": "turn_everything_off",
			"prerequisites": [
				"main_tasks"
			],
			"subtasks": [
				{
					"name": "close_vmix",
					"description": "Save this week's preset and close vMix."
				},
				{
					"name": "turn_off_monitors",
					"description": "Turn off both TV monitors in the MCR."
				},
				{
					"name": "turn_off_ndi_controller",
					"description": "Turn off the NDI controller."
				}
			]
		},
		{
			"name": "final",
			"prerequisites": [
				"turn_everything_off"
			],
			"subtasks": [
				{
					"name": "check_github_checklist",
					"description": "Double-check that all tasks (especially automatic ones) have been completed properly using the checklist on GitHub: https://github.com/recc-tech/tech/issues."
				},
				{
					"name": "shut_down_computers",
					"description": "When this script exits, shut down both MCR computers. If there are updates, then select 'Shut Down and Update' instead.",
					"prerequisites": [
						"check_github_checklist"
					]
				}
			]
		}
	]
}